<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhammad Sohail - AI-Powered Data Scientist Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom CSS for particles and overall theme */
        :root {
            --midnight-blue: #1A202C;
            --white: #FFFFFF;
            --neon-green: #38B2AC; /* Teal-like neon green */
            --light-bg: #f7fafc;
            --light-text: #2d3748;
            --light-accent: #3182CE;
            --dark-card-bg: #2D3748; /* Slightly darker grey for project cards in dark mode */
            --dark-border: rgba(255, 255, 255, 0.15); /* Slightly more visible border in dark mode */
            --light-border: rgba(0, 0, 0, 0.15); /* Slightly more visible border in light mode */
            --dark-text-secondary: #CBD5E0; /* Lighter grey for secondary text in dark mode */
            --light-text-secondary: #4A5568; /* Darker grey for secondary text in light mode */
        }

        body {
            font-family: 'Roboto Mono', monospace; /* Overall font to Mono Space */
            background-color: var(--midnight-blue);
            color: var(--white);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        body.light-mode {
            background-color: var(--light-bg);
            color: var(--light-text);
        }

        .audiowide-regular {
            font-family: "Audiowide", sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        .section-title {
            font-family: 'Roboto Mono', monospace;
            color: var(--neon-green);
            text-shadow: 0 0 5px var(--neon-green);
        }

        .dark-mode .section-title {
             text-shadow: 0 0 8px var(--neon-green);
        }

        /* Particle Background */
        .particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.2;
        }

        /* Hero Section Animation */
        .animated-subtitle span {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.5s forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Timeline styles */
        .timeline-item {
            position: relative;
            padding-left: 30px;
            margin-bottom: 40px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 6px;
            width: 15px;
            height: 15px;
            background: var(--neon-green);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--neon-green);
            z-index: 1;
        }
        .timeline-item::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 15px;
            bottom: -40px; /* Extend line down */
            width: 3px;
            background: var(--neon-green);
        }
        .timeline-item:last-child::after {
            bottom: auto; /* Stop line at the last item */
            height: calc(100% - 15px);
        }
        .dark-mode .timeline-item::before {
            box-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green);
        }

        /* Custom bullet points for timeline */
        .timeline-content-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            color: var(--white); /* Default for dark mode */
        }
        .light-mode .timeline-content-item {
            color: var(--light-text);
        }

        .timeline-bullet {
            width: 20px;
            height: 20px;
            min-width: 20px; /* Prevent shrinking */
            min-height: 20px; /* Prevent shrinking */
            background-color: var(--neon-green);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 10px;
            box-shadow: 0 0 5px var(--neon-green);
            color: var(--midnight-blue); /* Tick color */
            font-size: 0.8em;
            flex-shrink: 0; /* Prevent the bullet from shrinking */
        }
        .light-mode .timeline-bullet {
            color: var(--light-bg); /* Tick color in light mode */
        }

        .timeline-content {
            flex-grow: 1;
            padding-top: 2px; /* Align text better with bullet */
        }


        /* Project Card Hover Effect */
        .project-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            background-color: var(--dark-card-bg);
            border: 1px solid var(--dark-border);
        }
        .light-mode .project-card {
            background-color: #e2e8f0;
            border: 1px solid var(--light-border);
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        .dark-mode .project-card:hover {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 0 15px var(--neon-green);
        }
        .light-mode .project-card:hover {
             box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* Skill Badges */
        .skill-badge {
            display: inline-block;
            background-color: var(--neon-green);
            color: var(--midnight-blue);
            padding: 8px 16px;
            border-radius: 9999px;
            margin: 5px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
            opacity: 0;
            animation: fadeInScale 0.5s forwards;
            box-shadow: 0 0 8px rgba(56, 178, 172, 0.5); /* Neon glow */
        }
        .project-card .bg-gray-700 { /* For project card tags */
            background-color: var(--midnight-blue); /* Darker tags in dark mode */
            color: var(--dark-text-secondary);
        }
        .light-mode .project-card .bg-gray-700 {
            background-color: #CBD5E0; /* Lighter tags in light mode */
            color: var(--light-text-secondary);
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Floating Chatbot & Resume Matcher */
        .floating-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--neon-green);
            color: var(--midnight-blue);
            padding: 15px 20px;
            border-radius: 9999px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
            transition: background-color 0.3s;
        }

        .floating-button:hover {
            background-color: #2c9a94;
        }

        .chatbot-modal, .resume-matcher-modal, .cold-email-modal, .easter-egg-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--midnight-blue);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            z-index: 1001;
            max-width: 90%;
            width: 500px;
            max-height: 80%;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--neon-green); /* Neon border */
            opacity: 0; /* For fade in effect */
            transform: translate(-50%, -50%) scale(0.9); /* For scale in effect */
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .chatbot-modal.active, .resume-matcher-modal.active, .cold-email-modal.active, .easter-egg-modal.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .light-mode .chatbot-modal, .light-mode .resume-matcher-modal, .light-mode .cold-email-modal, .light-mode .easter-egg-modal {
            background-color: var(--light-bg);
            border: 1px solid var(--light-accent);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: rgba(56, 178, 172, 0.1); /* Subtle neon header */
            border-bottom: 1px solid rgba(56, 178, 172, 0.3);
            color: var(--white); /* Ensure header text is visible */
        }
        .light-mode .modal-header {
            background-color: rgba(49, 130, 206, 0.1);
            border-bottom: 1px solid rgba(49, 130, 206, 0.3);
            color: var(--light-text);
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            flex-grow: 1;
            color: var(--white); /* Ensure body text is visible */
        }
        .light-mode .modal-body {
            color: var(--light-text);
        }

        .chat-messages {
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid var(--dark-border);
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .light-mode .chat-messages {
            border: 1px solid var(--light-border);
        }

        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 12px;
            max-width: 80%;
        }

        .chat-message.user {
            background-color: var(--neon-green);
            color: var(--midnight-blue);
            align-self: flex-end;
            margin-left: auto;
            text-align: right;
        }

        .chat-message.ai {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
            align-self: flex-start;
            margin-right: auto;
            text-align: left;
        }
        .light-mode .chat-message.ai {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--light-text);
        }

        .chat-input-container {
            display: flex;
            padding-top: 15px;
            border-top: 1px solid rgba(56, 178, 172, 0.3);
        }
        .light-mode .chat-input-container {
             border-top: 1px solid rgba(49, 130, 206, 0.3);
        }

        .chat-input-container input, .chat-input-container textarea {
            flex-grow: 1;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--dark-border);
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--white);
        }
        .light-mode .chat-input-container input, .light-mode .chat-input-container textarea {
            border: 1px solid var(--light-border);
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--light-text);
        }

        /* Placeholder styling for inputs and textareas */
        .chat-input-container input::placeholder,
        .chat-input-container textarea::placeholder,
        .job-description-input::placeholder {
            color: rgba(255, 255, 255, 0.5); /* Lighter placeholder for dark mode */
        }
        .light-mode .chat-input-container input::placeholder,
        .light-mode .chat-input-container textarea::placeholder,
        .light-mode .job-description-input::placeholder {
            color: rgba(0, 0, 0, 0.5); /* Darker placeholder for light mode */
        }


        .chat-input-container button {
            background-color: var(--neon-green);
            color: var(--midnight-blue);
            padding: 10px 15px;
            border-radius: 20px;
            margin-left: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .chat-input-container button:hover {
            background-color: #2c9a94;
        }

        .job-description-input {
            width: 100%;
            height: 150px;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--dark-border);
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--white);
            resize: vertical;
        }
        .light-mode .job-description-input {
            border: 1px solid var(--light-border);
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--light-text);
        }

        .match-results {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(56, 178, 172, 0.1);
            border: 1px solid rgba(56, 178, 172, 0.3);
        }
        .light-mode .match-results {
            background-color: rgba(49, 130, 206, 0.1);
            border: 1px solid rgba(49, 130, 206, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .chatbot-modal, .resume-matcher-modal, .cold-email-modal, .easter-egg-modal {
                width: 95%;
                max-width: none;
            }
            .floating-button {
                bottom: 10px;
                right: 10px;
                padding: 12px 18px;
                font-size: 0.9em;
            }
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--neon-green);
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }
        .light-mode .loading-spinner {
            border-color: rgba(0, 0, 0, 0.3);
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Certifications List Style */
        .certifications-list {
            list-style: none; /* Remove default list style */
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px; /* Spacing between certification items */
        }

        .certifications-list-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: calc(33% - 20px); /* 3 items per row, accounting for gap */
            min-width: 280px; /* Ensure readability on smaller screens */
            max-width: 320px;
            padding: 20px;
            background-color: var(--dark-card-bg); /* Reuse card background */
            border: 1px solid var(--dark-border);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .light-mode .certifications-list-item {
            background-color: #e2e8f0;
            border: 1px solid var(--light-border);
        }

        .certifications-list-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3), 0 0 10px var(--neon-green);
        }
        .light-mode .certifications-list-item:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .cert-icon {
            font-size: 3em;
            color: var(--neon-green);
            margin-bottom: 15px;
        }
        .light-mode .cert-icon {
            color: var(--light-accent);
        }

        .cert-details {
            flex-grow: 1;
            color: var(--white);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .light-mode .cert-details {
            color: var(--light-text);
        }

        .cert-title {
            font-weight: 600;
            color: var(--neon-green);
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        .light-mode .cert-title {
            color: var(--light-accent);
        }

        .cert-issuer-date {
            color: var(--dark-text-secondary);
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .light-mode .cert-issuer-date {
            color: var(--light-text-secondary);
        }

        .cert-skills {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }
        .cert-skills .skill-badge {
            background-color: rgba(56, 178, 172, 0.2);
            color: var(--neon-green);
            border: 1px solid var(--neon-green);
            padding: 5px 10px;
            font-size: 0.8em;
            box-shadow: none; /* Remove glow for smaller badges */
        }
        .light-mode .cert-skills .skill-badge {
            background-color: rgba(49, 130, 206, 0.1);
            color: var(--light-accent);
            border: 1px solid var(--light-accent);
        }
        .cert-link {
            color: var(--neon-green);
            font-size: 0.9em;
            margin-top: 15px;
            display: flex;
            align-items: center;
        }
        .cert-link:hover {
            text-decoration: underline;
        }
        .cert-link i {
            margin-left: 5px;
        }

        /* Responsive adjustments for certifications */
        @media (max-width: 1024px) {
            .certifications-list-item {
                width: calc(50% - 20px); /* 2 items per row */
            }
        }

        @media (max-width: 640px) {
            .certifications-list-item {
                width: 90%; /* 1 item per row on very small screens */
            }
        }

    </style>
</head>
<body class="dark-mode">
    <!-- Particle Background Canvas -->
    <canvas id="particle-canvas" class="particle-canvas"></canvas>

    <!-- Theme Toggle Button -->
    <button id="theme-toggle" class="fixed top-4 right-4 z-50 p-3 rounded-full bg-gray-700 text-white shadow-lg transition-colors duration-300">
        <i class="fas fa-sun" id="theme-icon"></i>
    </button>

    <!-- Chatbot Floating Button -->
    <button id="chatbot-float-btn" class="floating-button flex items-center space-x-2">
        <i class="fas fa-comment-dots"></i>
        <span>Chat with My Resume</span>
    </button>

    <!-- Resume Matcher Floating Button (initially hidden, triggered by scroll/CTA) -->
    <button id="resume-matcher-float-btn" class="floating-button right-auto left-20 hidden flex items-center space-x-2">
        <i class="fas fa-clipboard-check"></i>
        <span>Resume Matcher</span>
    </button>

    <!-- Chatbot Modal -->
    <div id="chatbot-modal" class="chatbot-modal">
        <div class="modal-header">
            <h3 class="text-xl font-bold">AI Chatbot</h3>
            <button class="close-modal text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        <div class="modal-body flex flex-col h-full">
            <div id="chat-messages" class="chat-messages flex flex-col space-y-3">
                <div class="chat-message ai">Hello! I'm Muhammad's AI assistant. Ask me anything about his resume!</div>
            </div>
            <div class="chat-input-container">
                <input type="text" id="chat-input" placeholder="Ask a question..." class="rounded-full px-4 py-2 text-white">
                <button id="send-chat-btn" class="rounded-full px-4 py-2 flex items-center justify-center">
                    Send <div id="chat-loading-spinner" class="loading-spinner hidden"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Resume Matcher Modal -->
    <div id="resume-matcher-modal" class="resume-matcher-modal">
        <div class="modal-header">
            <h3 class="text-xl font-bold">Resume Matcher Tool</h3>
            <button class="close-modal text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        <div class="modal-body">
            <p class="mb-4">Paste your job description here and instantly see how well Muhammad’s profile fits!</p>
            <textarea id="job-description-input" class="job-description-input" placeholder="Paste job description here..."></textarea>
            <button id="analyze-jd-btn" class="mt-4 px-6 py-3 bg-neon-green text-midnight-blue rounded-full hover:bg-teal-600 transition-colors flex items-center justify-center">
                Analyze <div id="jd-loading-spinner" class="loading-spinner hidden"></div>
            </button>
            <div id="match-results" class="match-results mt-5 hidden">
                <h4 class="font-semibold text-lg mb-2">Match Analysis:</h4>
                <p><strong>Match Score:</strong> <span id="match-score"></span>%</p>
                <p><strong>Top Matching Keywords:</strong> <span id="matched-keywords"></span></p>
                <p><strong>Why this profile is a good fit:</strong> <span id="fit-summary"></span></p>
            </div>
        </div>
    </div>

    <!-- Easter Egg Modal -->
    <div id="easter-egg-modal" class="easter-egg-modal">
        <h3 class="text-xl font-bold mb-4">Muhammad's Favorite Open-Source LLMs</h3>
        <ul class="list-disc list-inside text-left mx-auto max-w-max">
            <li>Llama</li>
            <li>Mistral-7B</li>
            <li>Falcon</li>
            <li>Gemma</li>
        </ul>
        <button class="close-modal mt-6 px-4 py-2 bg-neon-green text-midnight-blue rounded-full hover:bg-teal-600">Close</button>
    </div>

    <div class="container mx-auto p-4 md:p-8">
        <!-- Hero Section -->
        <section id="hero" class="min-h-screen flex flex-col justify-center items-center text-center">
            <img src="https://i.ibb.co/84BZsFhc/1729600793626.jpg" alt="Muhammad Sohail Profile Picture" class="w-32 h-32 rounded-full mb-6 mx-auto object-cover border-4 border-neon-green shadow-lg">
            <h1 class="text-5xl md:text-7xl font-bold mb-4 audiowide-regular">Muhammad Sohail</h1>
            <p id="dynamic-tagline" class="text-xl md:text-2xl text-gray-300 mb-6">Loading intelligent insights...</p>
            <p id="animated-subtitle" class="animated-subtitle text-2xl md:text-4xl font-mono text-neon-green mb-8">
                <span style="animation-delay: 0s;">Data Science Intern</span> <span style="animation-delay: 0.2s;">|</span>
                <span style="animation-delay: 0.4s;">ML Developer</span> <span style="animation-delay: 0.6s;">|</span>
                <span style="animation-delay: 0.8s;">LLM Enthusiast</span>
            </p>
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6">
                <a href="https://drive.google.com/file/d/1OxmD0QWmGYYe4H7ExnykNhqJviGBDFSu/view?usp=sharing" target="_blank" class="px-8 py-3 bg-neon-green text-midnight-blue rounded-full shadow-lg hover:bg-teal-600 transition duration-300">
                    View Resume
                </a>
                <a href="#contact" class="px-8 py-3 border-2 border-neon-green text-neon-green rounded-full shadow-lg hover:bg-neon-green hover:text-midnight-blue transition duration-300">
                    Let’s Talk
                </a>
                <button id="hero-chatbot-btn" class="px-8 py-3 border-2 border-neon-green text-neon-green rounded-full shadow-lg hover:bg-neon-green hover:text-midnight-blue transition duration-300">
                    Try AI Chatbot
                </button>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="about" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">About Me</h2>
            <div class="max-w-3xl mx-auto text-lg leading-relaxed text-center">
                <p class="mb-4">
                    I'm Muhammad Sohail, a passionate Data Scientist and ML Developer with a keen interest in building intelligent solutions.
                    My expertise spans across <span class="font-bold text-neon-green">Python</span>, advanced machine learning techniques,
                    and cutting-edge <span class="font-bold text-neon-green">Large Language Models (LLMs)</span>. I thrive on
                    <span class="font-bold text-neon-green">Data Preprocessing</span>, <span class="font-bold text-neon-green">Model Training</span>,
                    and creating powerful <span class="font-bold text-neon-green">Chatbots</span>.
                </p>
                <p class="mb-4">
                    I am currently pursuing my <span class="font-bold text-neon-green">MSc M2 in Data Science and Network Intelligence</span> at
                    <span class="font-bold text-neon-green">Institut Polytechnique de Paris, France</span>. My coursework includes Data Science, Data Visualization, Deep Learning, Blockchain, Network Intelligence, Internet of Things (IoT), Distributed Networking, and Business Modelling.
                </p>
                <p class="mb-4">
                    I also hold a <span class="font-bold text-neon-green">Bachelor of Computer Science</span> from the <span class="font-bold text-neon-green">University of Malakand, Pakistan</span> (Aug 2019 - Sep 2023, GPA-3.75), where my coursework covered Programming Languages, Web Development, Database Management, Operating Systems, Networking, Software Engineering, AI, Mathematics, and Statistics.
                </p>
                <p class="mb-4">
                    <span class="font-bold text-neon-green">Languages:</span> English (Fluent), Pashto (Native/Bilingual), Urdu (Native/Bilingual), French (Basic).
                </p>
                <p class="text-gray-400">
                    <i class="fas fa-star text-neon-green mr-2"></i>Fun Fact: I love turning complex systems into simple, elegant solutions that deliver real-world impact.
                </p>
            </div>
        </section>

        <!-- Education Timeline Section -->
        <section id="education" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">Education Timeline</h2>
            <div class="max-w-3xl mx-auto">
                <div class="timeline-item">
                    <h3 class="text-2xl font-semibold text-neon-green">MSc M2 in Data Science and Network Intelligence</h3>
                    <p class="text-xl mb-2">Institut Polytechnique de Paris, France | Sep 2024 - Current</p>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">GPA: 15.81</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Coursework: Data Science, Data Visualization, Deep Learning, Blockchain, Network Intelligence, Internet of Things (IoT), Distributed Networking, Business Modelling.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <h3 class="text-2xl font-semibold text-neon-green">Bachelor of Computer Science</h3>
                    <p class="text-xl mb-2">University of Malakand, Pakistan | Aug 2019 - Sep 2023</p>
                     <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">GPA: 3.75</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Coursework: Programming Languages, Web Development, Database Management, Operating Systems, Networking, Software Engineering, AI, Mathematics, and Statistics.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Experience Timeline Section -->
        <section id="experience" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">Experience Timeline</h2>
            <div class="max-w-3xl mx-auto">
                <div class="timeline-item">
                    <h3 class="text-2xl font-semibold text-neon-green">Data Science Intern</h3>
                    <p class="text-xl mb-2">Université Paris-Saclay | Mar 2025 - Present</p>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Developing an intelligent HR chatbot using LLMs and Retrieval-Augmented Generation (RAG) to automate staff inquiries on recruitment, leave, and training.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Implementing robust validation mechanisms to ensure accurate and policy-compliant responses.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Designing a user-friendly interface using Streamlit and Gradio, deployed within the university's internal data center.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Leveraging tools like Unstructured.io, Docling, LlamaParse, pdfplumber, and LangChain for document parsing and knowledge extraction.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Using open-source models such as LLaMA, Mistral, and others for generating contextual answers via API integration.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <h3 class="text-2xl font-semibold text-neon-green">Data Analyst Intern (Remote)</h3>
                    <p class="text-xl mb-2">Code Clause Pvt Ltd. | Oct 2023 - Apr 2024</p>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Led data preparation tasks, including handling missing values and standardizing data for accurate analysis.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Applied advanced statistical techniques (e.g., linear regression, hypothesis testing) to uncover insights and support decision-making.</p>
                    </div>
                    <div class="timeline-content-item">
                        <span class="timeline-bullet"><i class="fas fa-check"></i></span>
                        <p class="timeline-content">Delivered actionable insights via dashboards and reports, enhancing stakeholder understanding and driving strategic decisions.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Gallery Section -->
        <section id="projects" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">Projects Gallery</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- HR Chatbot Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">HR Chatbot</h3>
                    <p class="text-gray-300 mb-4">Intelligent HR chatbot for automating staff inquiries using LLMs and RAG.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">LangChain</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">LLaMA</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Gradio</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">RAG</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="#" target="_blank" class="text-neon-green hover:underline">GitHub <i class="fab fa-github ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="hr-chatbot">Read More</button>
                    </div>
                    <div id="hr-chatbot-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: This project involved the development of an HR chatbot capable of automating staff inquiries related to recruitment, leave, and training. It leverages advanced LLMs and Retrieval-Augmented Generation (RAG) to ensure contextual and accurate responses. Robust validation mechanisms were implemented for policy compliance. Tools used include Unstructured.io, Docling, LlamaParse, and pdfplumber for document parsing and knowledge extraction.
                    </div>
                </div>

                <!-- MediBot Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">MediBot</h3>
                    <p class="text-gray-300 mb-4">AI-powered medical chatbot for retrieving trusted medical information.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Python</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">LangChain</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">FAISS</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Mistral-7B</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="#" target="_blank" class="text-neon-green hover:underline">GitHub <i class="fab fa-github ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="medibot">Read More</button>
                    </div>
                    <div id="medibot-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: Built an AI-powered medical chatbot that retrieves trusted medical information using a context-based retrieval system. Tools Used: Python, LangChain, FAISS, Hugging Face, Mistral-7B, Streamlit, Hugging Face Spaces.
                    </div>
                </div>

                <!-- Emotion Detection Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">Emotion Detection</h3>
                    <p class="text-gray-300 mb-4">System to detect perceived emotions in text using deep learning.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">TensorFlow</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Keras</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">PyTorch</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">NLTK</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">SpaCy</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="#" target="_blank" class="text-neon-green hover:underline">GitHub <i class="fab fa-github ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="emotion-detection">Read More</button>
                    </div>
                    <div id="emotion-detection-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: Developed a system to detect perceived emotions in text using deep learning algorithms, enabling multi-label emotion classification and intensity estimation. This task focuses on detecting perceived emotions in text, including predicting emotions (joy, sadness, fear, anger, surprise, disgust), estimating emotion intensity, and cross-lingual emotion detection. The dataset covers a variety of languages, highlighting the complexity of interpreting emotions across cultures. Skills: Deep Learning · TensorFlow · Keras · PyTorch · Natural Language Processing: NLTK, SpaCy, Transformers · Data Processing: Pandas, NumPy · Visualization: Matplotlib, Seaborn · Deployment: Streamlit.
                    </div>
                </div>

                <!-- Parkinson Predictor Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">Parkinson Predictor</h3>
                    <p class="text-gray-300 mb-4">Machine learning system for Parkinson's disease progression prediction.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Python</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Scikit-learn</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">XGBoost</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Streamlit</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="#" target="_blank" class="text-neon-green hover:underline">GitHub <i class="fab fa-github ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="parkinson-predictor">Read More</button>
                    </div>
                    <div id="parkinson-predictor-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: This machine learning system identifies subtypes of Parkinson's disease and predicts disease progression using clinical and genetic data. Tools like Python, Pandas, Scikit-learn, XGBoost, LightGBM, and Streamlit were used to develop and present the predictive models.
                    </div>
                </div>

                <!-- Basic Image Classification with Tensorflow Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">Basic Image Classification with Tensorflow</h3>
                    <p class="text-gray-300 mb-4">A simple image classifier using TensorFlow and CNNs.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">TensorFlow</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Keras</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">CNN</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Python</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="https://github.com/CallSohail/Basic-Image-Classification-With-Tensorflow" target="_blank" class="text-neon-green hover:underline">GitHub <i class="fab fa-github ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="image-classification">Read More</button>
                    </div>
                    <div id="image-classification-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: I built a simple image classifier using TensorFlow. The model distinguishes between image categories using a convolutional neural network (CNN). I preprocessed the image data—resizing, normalizing, and even augmenting to boost performance. The CNN, built with TensorFlow’s Keras API, learned to identify key features in images. Techniques like dropout and pooling were used to improve accuracy and reduce overfitting. This project sharpened my skills in deep learning and model evaluation, provided hands-on experience in tuning hyperparameters and troubleshooting model performance, and was a great step in my journey into AI."
                    </div>
                </div>

                <!-- Dynamic Cooling System in Data Centers Using IoT & LSTM Card -->
                <div class="project-card rounded-xl p-6 shadow-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-neon-green">Dynamic Cooling System in Data Centers Using IoT & LSTM</h3>
                    <p class="text-gray-300 mb-4">IoT-powered dynamic cooling system for data centers.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">IoT</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">LSTM</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Predictive Analytics</span>
                        <span class="bg-gray-700 text-gray-200 px-3 py-1 rounded-full text-sm">Energy Efficiency</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <a href="https://drive.google.com/file/d/19cPWUFmizD4H7woCS7pQ2Xb_430EDupi/view?usp=sharing&usp=embed_facebook" target="_blank" class="text-neon-green hover:underline">Drive Link <i class="fas fa-link ml-1"></i></a>
                        <button class="expand-project text-neon-green hover:underline" data-project="cooling-system">Read More</button>
                    </div>
                    <div id="cooling-system-summary" class="hidden mt-4 text-sm text-gray-400">
                        Detailed summary: Developed a dynamic cooling system for data centers that combines air and liquid cooling. The system adjusts in real time based on sensor data. IoT sensors collect temperature, humidity, and energy data, and an LSTM neural network processes this information to predict cooling needs. Benefits include optimizing energy consumption, reducing carbon footprint, and enhancing system reliability and equipment lifespan. This project features a robust, multi-tier architecture with data collection, edge processing, central decision-making, and actuator control. Completed as part of my Master’s program at Telecom SudParis, it showcases my ability to integrate predictive analytics and smart systems to drive energy efficiency.
                    </div>
                </div>

            </div>
            <p class="text-center text-lg mt-8 text-gray-400">
                <i class="fas fa-chart-line text-neon-green mr-2"></i>Projects: <span id="projects-counter">0</span>+
            </p>
        </section>

        <!-- Certifications Section -->
        <section id="certifications" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">Licenses & Certifications</h2>
            <div class="max-w-3xl mx-auto certifications-list">
                <!-- Certifications will be dynamically loaded here by JavaScript -->
            </div>
        </section>


        <!-- Skills & Tools Section -->
        <section id="skills" class="py-20">
            <h2 class="section-title text-4xl font-bold mb-10 text-center">Skills & Tools</h2>
            <div class="flex justify-center mb-6 flex-wrap gap-3">
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="all">All</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="programming">Programming</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="ml-frameworks">ML Frameworks</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="llm-tools">LLMs & RAG tools</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="ml-concepts">ML & AI Concepts</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="deployment">Deployment</button>
                <button class="filter-skills px-6 py-2 rounded-full bg-gray-700 text-gray-200 hover:bg-neon-green hover:text-midnight-blue transition-colors" data-filter="tools">Tools</button>
            </div>
            <div id="skills-container" class="flex flex-wrap justify-center gap-4">
                <span class="skill-badge" data-category="programming">Python</span>
                <span class="skill-badge" data-category="programming">C++</span>
                <span class="skill-badge" data-category="programming">Java</span>
                <span class="skill-badge" data-category="programming">SQL</span>
                <span class="skill-badge" data-category="ml-frameworks">TensorFlow</span>
                <span class="skill-badge" data-category="ml-frameworks">Keras</span>
                <span class="skill-badge" data-category="ml-frameworks">PyTorch</span>
                <span class="skill-badge" data-category="ml-frameworks">Scikit-learn</span>
                <span class="skill-badge" data-category="ml-frameworks">XGBoost</span>
                <span class="skill-badge" data-category="ml-frameworks">LightGBM</span>
                <span class="skill-badge" data-category="llm-tools">LangChain</span>
                <span class="skill-badge" data-category="llm-tools">FAISS</span>
                <span class="skill-badge" data-category="llm-tools">Hugging Face</span>
                <span class="skill-badge" data-category="llm-tools">LLMs (General)</span>
                <span class="skill-badge" data-category="llm-tools">RAG</span>
                <span class="skill-badge" data-category="llm-tools">Chatbot Development</span>
                <span class="skill-badge" data-category="llm-tools">Chromadb</span>
                <span class="skill-badge" data-category="llm-tools">Unstructured.io</span>
                <span class="skill-badge" data-category="llm-tools">Docling</span>
                <span class="skill-badge" data-category="llm-tools">LlamaParse</span>
                <span class="skill-badge" data-category="llm-tools">pdfplumber</span>
                <span class="skill-badge" data-category="ml-concepts">Supervised Learning</span>
                <span class="skill-badge" data-category="ml-concepts">Unsupervised Learning</span>
                <span class="skill-badge" data-category="ml-concepts">Data Preprocessing</span>
                <span class="skill-badge" data-category="ml-concepts">Model Training</span>
                <span class="skill-badge" data-category="ml-concepts">Neural Networks</span>
                <span class="skill-badge" data-category="ml-concepts">Deep Learning</span>
                <span class="skill-badge" data-category="ml-concepts">Data Visualization</span>
                <span class="skill-badge" data-category="ml-concepts">A/B Testing</span>
                <span class="skill-badge" data-category="ml-concepts">Feature Engineering</span>
                <span class="skill-badge" data-category="ml-concepts">Convolutional Neural Networks (CNN)</span>
                <span class="skill-badge" data-category="ml-concepts">Model Tuning</span>
                <span class="skill-badge" data-category="ml-concepts">Natural Language Processing (NLP)</span>
                <span class="skill-badge" data-category="ml-concepts">IoT Sensor Networks</span>
                <span class="skill-badge" data-category="ml-concepts">LSTM Neural Networks</span>
                <span class="skill-badge" data-category="ml-concepts">Predictive Analytics</span>
                <span class="skill-badge" data-category="ml-concepts">System Architecture</span>
                <span class="skill-badge" data-category="ml-concepts">Energy Efficiency</span>
                <span class="skill-badge" data-category="deployment">Streamlit</span>
                <span class="skill-badge" data-category="deployment">Gradio</span>
                <span class="skill-badge" data-category="tools">Power BI</span>
                <span class="skill-badge" data-category="tools">Tableau</span>
                <span class="skill-badge" data-category="tools">Excel</span>
                <span class="skill-badge" data-category="tools">Pandas</span>
                <span class="skill-badge" data-category="tools">NumPy</span>
                <span class="skill-badge" data-category="tools">Matplotlib</span>
                <span class="skill-badge" data-category="tools">Seaborn</span>
                <span class="skill-badge" data-category="tools">Git</span>
                <span class="skill-badge" data-category="tools">GitHub</span>
                <span class="skill-badge" data-category="tools">VS Code</span>
            </div>
            <p class="text-center text-lg mt-8 text-gray-400">
                <i class="fas fa-tools text-neon-green mr-2"></i>Tools Mastered: <span id="tools-counter">0</span>+
            </p>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 text-center">
            <h2 class="section-title text-4xl font-bold mb-10">Let’s build smart things together.</h2>
            <div class="flex justify-center space-x-6 mb-8">
                <a href="https://github.com/muhammadsohail951" target="_blank" class="text-5xl text-gray-300 hover:text-neon-green transition-colors">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://linkedin.com/in/muhammadsohail951" target="_blank" class="text-5xl text-gray-300 hover:text-neon-green transition-colors">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="mailto:sohail.cs951@gmail.com" class="text-5xl text-gray-300 hover:text-neon-green transition-colors">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="https://huggingface.co/muhammadsohail" target="_blank" class="text-5xl text-gray-300 hover:text-neon-green transition-colors">
                    <i class="fas fa-robot"></i> <!-- Using robot icon for Hugging Face -->
                </a>
            </div>
            <button id="cold-email-bot-btn" class="px-8 py-3 border-2 border-neon-green text-neon-green rounded-full shadow-lg hover:bg-neon-green hover:text-midnight-blue transition duration-300">
                Generate Cold Email (AI)
            </button>
             <div id="cold-email-modal" class="cold-email-modal hidden">
                <div class="modal-header">
                    <h3 class="text-xl font-bold">Generate Cold Email</h3>
                    <button class="close-modal text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                <div class="modal-body flex flex-col h-full">
                    <p class="mb-4 text-left">Tell me what kind of email you want to generate (e.g., "Write an email to hire Sohail for an NLP internship", "Email for collaboration on a data science project").</p>
                    <input type="text" id="cold-email-prompt-input" placeholder="Your email prompt..." class="rounded-full px-4 py-2 text-white mb-4">
                    <button id="generate-email-btn" class="px-6 py-3 bg-neon-green text-midnight-blue rounded-full hover:bg-teal-600 transition-colors flex items-center justify-center">
                        Generate Email <div id="email-loading-spinner" class="loading-spinner hidden"></div>
                    </button>
                    <div id="generated-email-output" class="match-results mt-5 hidden text-left">
                        <h4 class="font-semibold text-lg mb-2">Generated Email:</h4>
                        <textarea id="email-text-output" class="job-description-input" rows="10" readonly></textarea>
                        <button id="copy-email-btn" class="mt-4 px-4 py-2 bg-gray-700 text-gray-200 rounded-full hover:bg-gray-600 transition-colors">Copy to Clipboard</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-10 text-center text-gray-500 text-sm">
            <p>Copyright © Muhammad Sohail</p>
            <!-- Removed "Built with ♥ using Gemini & Streamlit-inspired design" -->
            <!-- Removed "Resume PDF" and "GitHub Pages Repo" links -->
        </footer>
    </div>

    <script type="module">
        // Firebase Imports - MUST be at the top level of the module script
        // These imports will be processed as ES Modules.
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"; // Uncomment if Firestore is used


        // Resume Data for Chatbot and Matcher
        const resumeData = {
            name: "Muhammad Sohail",
            email: "sohail.cs951@gmail.com",
            phone: "(33) 781588798",
            linkedin: "muhammadsohail951",
            location: "Evry France",
            experience: [
                {
                    title: "Data Science Intern",
                    company: "Université Paris-Saclay",
                    duration: "Mar 2025 - Present",
                    description: "Developing an intelligent HR chatbot using LLMs and Retrieval-Augmented Generation (RAG) to automate staff inquiries on recruitment, leave, and training. Implementing robust validation mechanisms to ensure accurate and policy-compliant responses. Designing a user-friendly interface using Streamlit and Gradio, deployed within the university's internal data center. Leveraging tools like Unstructured.io, Docling, LlamaParse, pdfplumber, and LangChain for document parsing and knowledge extraction. Using open-source models such as LLaMA, Mistral, and others for generating contextual answers via API integration.",
                    keywords: ["LLMs", "RAG", "Streamlit", "Gradio", "LangChain", "LLaMA", "Mistral", "Unstructured.io", "Docling", "LlamaParse", "pdfplumber"]
                },
                {
                    title: "Data Analyst Intern (Remote)",
                    company: "Code Clause Pvt Ltd.",
                    duration: "Oct 2023 - Apr 2024",
                    description: "Led data preparation tasks, including handling missing values and standardizing data for accurate analysis. Applied advanced statistical techniques (e.g., linear regression, hypothesis testing) to uncover insights and support decision-making. Delivered actionable insights via dashboards and reports, enhancing stakeholder understanding and driving strategic decisions.",
                    keywords: ["Data Preparation", "Statistical Analysis", "Linear Regression", "Hypothesis Testing", "Dashboards", "Reports"]
                }
            ],
            education: [
                {
                    degree: "MSc M2 in Data Science and Network Intelligence",
                    institution: "Institut Polytechnique de Paris, France",
                    duration: "Sep 2024 - Current",
                    gpa: "15.81",
                    coursework: "Data Science, Data Visualization, Deep Learning, Blockchain, Network Intelligence, Internet of Things (IoT), Distributed Networking, Business Modelling"
                },
                {
                    degree: "Bachelor of Computer Science",
                    institution: "University of Malakand, Pakistan",
                    duration: "Aug 2019 - Sep 2023",
                    gpa: "3.75",
                    coursework: "Programming Languages, Web Development, Database Management, Operating Systems, Networking, Software Engineering, AI, Mathematics, and Statistics"
                }
            ],
            projects: [
                {
                    name: "HR Chatbot",
                    description: "Intelligent HR chatbot for automating staff inquiries using LLMs and RAG.",
                    tools: ["LangChain", "LLaMA", "Gradio", "RAG", "Unstructured.io", "Docling", "LlamaParse", "pdfplumber"],
                    github_link: "#", // Placeholder
                    summary: "This project involved the development of an HR chatbot capable of automating staff inquiries related to recruitment, leave, and training. It leverages advanced LLMs and Retrieval-Augmented Generation (RAG) to ensure contextual and accurate responses. Robust validation mechanisms were implemented for policy compliance. Tools used include Unstructured.io, Docling, LlamaParse, and pdfplumber for document parsing and knowledge extraction."
                },
                {
                    name: "MediBot",
                    description: "AI-powered medical chatbot for retrieving trusted medical information.",
                    tools: ["Python", "LangChain", "FAISS", "Hugging Face", "Mistral-7B", "Streamlit", "Hugging Face Spaces"],
                    github_link: "#", // Placeholder
                    summary: "Built an AI-powered medical chatbot that retrieves trusted medical information using a context-based retrieval system. Tools Used: Python, LangChain, FAISS, Hugging Face, Mistral-7B, Streamlit, Hugging Face Spaces."
                },
                {
                    name: "Emotion Detection",
                    description: "System to detect perceived emotions in text using deep learning.",
                    tools: ["TensorFlow", "Keras", "PyTorch", "NLTK", "SpaCy", "Transformers", "Pandas", "NumPy", "Matplotlib", "Seaborn", "Streamlit"],
                    github_link: "#", // Placeholder
                    summary: "Developed a system to detect perceived emotions in text using deep learning algorithms, enabling multi-label emotion classification and intensity estimation. This task focuses on detecting perceived emotions in text, including predicting emotions (joy, sadness, fear, anger, surprise, disgust), estimating emotion intensity, and cross-lingual emotion detection. The dataset covers a variety of languages, highlighting the complexity of interpreting emotions across cultures. Skills: Deep Learning · TensorFlow · Keras · PyTorch · Natural Language Processing: NLTK, SpaCy, Transformers · Data Processing: Pandas, NumPy · Visualization: Matplotlib, Seaborn · Deployment: Streamlit."
                },
                {
                    name: "Parkinson's Disease Progression Prediction",
                    description: "Machine learning system for Parkinson's disease progression prediction.",
                    tools: ["Python", "Pandas", "Scikit-learn", "XGBoost", "LightGBM", "Streamlit"],
                    github_link: "#", // Placeholder
                    summary: "This machine learning system identifies subtypes of Parkinson's disease and predicts disease progression using clinical and genetic data. Tools like Python, Pandas, Scikit-learn, XGBoost, LightGBM, and Streamlit were used to develop and present the predictive models."
                },
                {
                    name: "Basic Image Classification with Tensorflow",
                    description: "A simple image classifier using TensorFlow and CNNs.",
                    tools: ["TensorFlow", "Keras", "Convolutional Neural Networks (CNN)", "Python", "Pandas", "NumPy", "Model Tuning"],
                    github_link: "https://github.com/CallSohail/Basic-Image-Classification-With-Tensorflow",
                    summary: "I built a simple image classifier using TensorFlow. The model distinguishes between image categories using a convolutional neural network (CNN). I preprocessed the image data—resizing, normalizing, and even augmenting to boost performance. The CNN, built with TensorFlow’s Keras API, learned to identify key features in images. Techniques like dropout and pooling were used to improve accuracy and reduce overfitting. This project sharpened my skills in deep learning and model evaluation, provided hands-on experience in tuning hyperparameters and troubleshooting model performance, and was a great step in my journey into AI."
                },
                {
                    name: "Dynamic Cooling System in Data Centers Using IoT & LSTM",
                    description: "IoT-powered dynamic cooling system for data centers.",
                    tools: ["IoT Sensor Networks", "LSTM Neural Networks", "Predictive Analytics", "System Architecture", "Energy Efficiency", "Python"],
                    github_link: "https://drive.google.com/file/d/19cPWUFmizD4H7woCS7pQ2Xb_430EDupi/view?usp=sharing&usp=embed_facebook",
                    summary: "Developed a dynamic cooling system for data centers that combines air and liquid cooling. The system adjusts in real time based on sensor data. IoT sensors collect temperature, humidity, and energy data, and an LSTM neural network processes this information to predict cooling needs. Benefits include optimizing energy consumption, reducing carbon footprint, and enhancing system reliability and equipment lifespan. This project features a robust, multi-tier architecture with data collection, edge processing, central decision-making, and actuator control. Completed as part of my Master’s program at Telecom SudParis, it showcases my ability to integrate predictive analytics and smart systems to drive energy efficiency."
                }
            ],
            skills: {
                "Programming": ["Python", "C++", "Java", "SQL (MySQL, PostgreSQL)"],
                "ML Frameworks": ["TensorFlow", "Keras", "PyTorch", "Scikit-learn", "XGBoost", "LightGBM"],
                "LLMs & RAG tools": ["LangChain", "FAISS", "Hugging Face", "LLMs", "Retrieval-Augmented Generation (RAG)", "Chatbot Development", "Chromadb", "Unstructured.io", "Docling", "LlamaParse", "pdfplumber", "NLTK", "SpaCy", "Transformers"],
                "Machine Learning & AI Concepts": [
                    "Supervised/Unsupervised Learning",
                    "Data Preprocessing",
                    "Model Training",
                    "Neural Networks",
                    "Deep Learning",
                    "Data Visualization",
                    "A/B Testing",
                    "Feature Engineering",
                    "Convolutional Neural Networks (CNN)",
                    "Model Tuning",
                    "Natural Language Processing (NLP)",
                    "IoT Sensor Networks",
                    "LSTM Neural Networks",
                    "Predictive Analytics",
                    "System Architecture",
                    "Energy Efficiency"
                ],
                "Deployment": ["Streamlit", "Gradio"],
                "Tools": ["Power BI", "Tableau", "Excel", "Pandas", "NumPy", "Matplotlib", "Seaborn", "Git", "GitHub", "VS Code"]
            },
            languages: {
                "English": "Fluent",
                "Pashto": "Native/Bilingual",
                "Urdu": "Native/Bilingual",
                "French": "Basic"
            },
            certifications: [
                {
                    title: "Python (Basic) Certificate",
                    issuer: "HackerRank",
                    issued_date: "Mar 2023",
                    credential_link: "https://www.hackerrank.com/certificates/a3447be213bd",
                    skills: ["Python (Programming Language)"]
                },
                {
                    title: "Introduction to Deep Learning & Neural Networks with Keras",
                    issuer: "Coursera",
                    issued_date: "Sep 2022",
                    credential_link: "https://coursera.org/share/c998d49d5e64e32df7f1974cda8d9397",
                    skills: []
                },
                {
                    title: "Basic Image Classification with Tensorflow",
                    issuer: "Coursera",
                    issued_date: "Jun 2022",
                    credential_link: "https://coursera.org/share/414d8fb6fb50c392725ef00c2061fc99",
                    skills: ["Scikit-Learn", "Data Science"]
                },
                {
                    title: "Create a Profile and Network on LinkedIn",
                    issuer: "Coursera",
                    issued_date: "Jun 2022",
                    credential_link: "https://coursera.org/share/a901b5e0e309932e99133a861b4f22b4",
                    skills: []
                },
                {
                    title: "Deep Learning with PyTorch : Image Segmentation",
                    issuer: "Coursera",
                    issued_date: "Jun 2022",
                    credential_link: "https://coursera.org/share/288d38048b91c568676c6df17817d2e6",
                    skills: ["Scikit-Learn", "Data Science"]
                },
                {
                    title: "Machine Learning With Python",
                    issuer: "Coursera",
                    issued_date: "Jun 2022",
                    credential_link: "https://coursera.org/share/51781f6e8a1acc10b4d55c96eba6c840",
                    skills: ["Scikit-Learn", "Natural Language Processing (NLP)"]
                },
                {
                    title: "Statement of Accomplishment",
                    issuer: "DataCamp",
                    issued_date: "Oct 2021",
                    credential_link: "https://www.datacamp.com/statement-of-accomplishment/course/7c0492242036abd0d589d9ff8119596960d41692",
                    skills: ["Scikit-Learn", "Natural Language Processing (NLP)"]
                },
                {
                    title: "Certificate of partcipation",
                    issuer: "CyberVision International",
                    issued_date: "Aug 2021",
                    credential_link: null,
                    skills: []
                }
            ]
        };

        // --- Global Variables for Firebase/Gemini API (Canvas Environment) ---
        // These are provided by the Canvas environment. If they are not defined,
        // fallback to default values (e.g., for local development).
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const apiKey = "AIzaSyCmmzkcYRIz-VO2-27Jhd3AxO1Vzob5Yjk"; // API Key provided by the user

        // Initialize Firebase (if Firebase config is available)
        let app, db, auth;
        let userId = 'anonymous'; // Default to anonymous

        // Only initialize Firebase if a config is provided.
        // This makes the app runnable even outside the Canvas environment for basic UI.
        if (Object.keys(firebaseConfig).length > 0) {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            // db = getFirestore(app); // Uncomment if Firestore is used

            // Authenticate user
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("Authenticated user ID:", userId);
                } else {
                    try {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                        userId = auth.currentUser?.uid || crypto.randomUUID(); // Fallback if auth.currentUser is null
                        console.log("Signed in with user ID:", userId);
                    } catch (error) {
                        console.error("Firebase authentication error:", error);
                        // Fallback to a random UUID if auth fails
                        userId = crypto.randomUUID();
                        console.log("Continuing with anonymous user ID:", userId);
                    }
                }
            });
        } else {
            console.warn("Firebase config not found. AI features relying on Firebase/Gemini API might not function.");
            userId = crypto.randomUUID(); // Generate a random ID for local testing without Firebase
        }


        // --- Particle Background Animation ---
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const numParticles = 100;
        const connectionDistance = 150; // Max distance for lines between particles

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        class Particle {
            constructor(x, y) {
                this.x = x || Math.random() * canvas.width;
                this.y = y || Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5; // Slower movement
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 1.5 + 0.5; // Smaller particles
                this.color = 'rgba(56, 178, 172, 0.8)'; // Neon green/teal
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;

                // Bounce off edges
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < numParticles; i++) {
                particles.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();

                // Draw lines between nearby particles
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.strokeStyle = `rgba(56, 178, 172, ${1 - (distance / connectionDistance)})`;
                        ctx.lineWidth = 0.5;
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animateParticles);
        }

        window.addEventListener('load', () => {
            resizeCanvas();
            initParticles();
            animateParticles();
            generateDynamicTagline(); // Call dynamic tagline generation on load
        });
        window.addEventListener('resize', resizeCanvas);


        // --- Theme Toggle ---
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const body = document.body;

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            body.classList.toggle('light-mode');
            if (body.classList.contains('light-mode')) {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                // Adjust particle color for light mode if desired
                particles.forEach(p => p.color = 'rgba(49, 130, 206, 0.8)'); // Blue for light mode
            } else {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                particles.forEach(p => p.color = 'rgba(56, 178, 172, 0.8)'); // Neon green for dark mode
            }
        });


        // --- Smooth Scrolling ---
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });


        // --- Animated Subtitle ---
        const subtitleSpans = document.querySelectorAll('#animated-subtitle span');
        subtitleSpans.forEach((span, index) => {
            span.style.animationDelay = `${index * 0.15}s`;
        });


        // --- Project Card Expandable Summary ---
        document.querySelectorAll('.expand-project').forEach(button => {
            button.addEventListener('click', (e) => {
                const projectId = e.target.dataset.project;
                const summaryDiv = document.getElementById(`${projectId}-summary`);
                if (summaryDiv) {
                    summaryDiv.classList.toggle('hidden');
                    e.target.textContent = summaryDiv.classList.contains('hidden') ? 'Read More' : 'Show Less';
                }
            });
        });


        // --- Skill Filter ---
        const filterButtons = document.querySelectorAll('.filter-skills');
        const skillBadges = document.querySelectorAll('.skill-badge');

        filterButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const filter = e.target.dataset.filter;
                skillBadges.forEach(badge => {
                    const category = badge.dataset.category;
                    if (filter === 'all' || category === filter) {
                        badge.style.display = 'inline-block';
                        badge.style.animation = 'fadeInScale 0.5s forwards'; // Re-animate
                        badge.style.opacity = 0; // Reset opacity for animation
                    } else {
                        badge.style.display = 'none';
                    }
                });
            });
        });

        // --- Interactive Stats Counters ---
        const projectsCounter = document.getElementById('projects-counter');
        const toolsCounter = document.getElementById('tools-counter');

        function animateCounter(element, target, duration) {
            let start = 0;
            const increment = target / (duration / 16); // 16ms per frame
            const step = () => {
                start += increment;
                if (start < target) {
                    element.textContent = Math.floor(start);
                    requestAnimationFrame(step);
                } else {
                    element.textContent = target;
                }
            };
            requestAnimationFrame(step);
        }

        // Trigger counters when section is in view
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5 // Trigger when 50% of the section is visible
        };

        const projectsSection = document.getElementById('projects');
        const skillsSection = document.getElementById('skills');

        const sectionObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (entry.target.id === 'projects') {
                        animateCounter(projectsCounter, resumeData.projects.length, 1000);
                        observer.unobserve(entry.target); // Stop observing once animated
                    } else if (entry.target.id === 'skills') {
                        let totalTools = 0;
                        for (const category in resumeData.skills) {
                            totalTools += resumeData.skills[category].length;
                        }
                        animateCounter(toolsCounter, totalTools, 1500);
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                }
            });
        }, observerOptions);

        sectionObserver.observe(projectsSection);
        sectionObserver.observe(skillsSection);


        // --- Chatbot Functionality ---
        const chatbotFloatBtn = document.getElementById('chatbot-float-btn');
        const heroChatbotBtn = document.getElementById('hero-chatbot-btn');
        const chatbotModal = document.getElementById('chatbot-modal');
        const closeModals = document.querySelectorAll('.close-modal'); // Select all close buttons
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendChatBtn = document.getElementById('send-chat-btn');
        const chatLoadingSpinner = document.getElementById('chat-loading-spinner');

        function openModal(modal) {
            modal.style.display = 'flex';
            modal.classList.add('active'); // Add active class for transition
        }

        function closeModalsFunc() {
            document.querySelectorAll('.chatbot-modal, .resume-matcher-modal, .cold-email-modal, .easter-egg-modal').forEach(modal => {
                modal.classList.remove('active'); // Remove active class for transition
                // Give some time for the transition to complete before hiding
                setTimeout(() => { modal.style.display = 'none'; }, 300);
            });
        }

        chatbotFloatBtn.addEventListener('click', () => openModal(chatbotModal));
        heroChatbotBtn.addEventListener('click', () => openModal(chatbotModal));

        closeModals.forEach(button => {
            button.addEventListener('click', closeModalsFunc);
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target.classList.contains('chatbot-modal') || event.target.classList.contains('resume-matcher-modal') || event.target.classList.contains('cold-email-modal') || event.target.classList.contains('easter-egg-modal')) {
                closeModalsFunc();
            }
        });

        function addMessage(message, sender) {
            const msgDiv = document.createElement('div');
            msgDiv.classList.add('chat-message', sender === 'user' ? 'user' : 'ai');
            msgDiv.textContent = message;
            chatMessages.appendChild(msgDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll to bottom
        }

        async function sendChatMessage() {
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            addMessage(userMessage, 'user');
            chatInput.value = '';
            chatLoadingSpinner.classList.remove('hidden');
            sendChatBtn.disabled = true;

            try {
                // Construct a detailed prompt for the LLM based on user query and resume data
                const fullPrompt = `You are an AI assistant for Muhammad Sohail's portfolio. Your goal is to answer questions about him and his resume accurately and concisely. Use the provided resume data. If you don't know the answer based on the resume, politely say so.

                Muhammad Sohail's Resume Data:
                Name: ${resumeData.name}
                Email: ${resumeData.email}
                Phone: ${resumeData.phone}
                LinkedIn: https://linkedin.com/in/${resumeData.linkedin}
                Location: ${resumeData.location}

                Experience:
                ${resumeData.experience.map(exp => `- ${exp.title} at ${exp.company} (${exp.duration}): ${exp.description}`).join('\n')}

                Education:
                ${resumeData.education.map(edu => `- ${edu.degree} from ${edu.institution} (${edu.duration})${edu.gpa ? `, GPA: ${edu.gpa}` : ''}${edu.coursework ? `, Coursework: ${edu.coursework}` : ''}`).join('\n')}

                Projects:
                ${resumeData.projects.map(proj => `- ${proj.name}: ${proj.description} (Tools: ${proj.tools.join(', ')})`).join('\n')}

                Skills:
                ${Object.entries(resumeData.skills).map(([category, skillList]) => `${category}: ${skillList.join(', ')}`).join('\n')}

                Languages (Spoken):
                ${Object.entries(resumeData.languages).map(([lang, proficiency]) => `- ${lang} (${proficiency})`).join('\n')}

                Certifications:
                ${resumeData.certifications.map(cert => `- ${cert.title} from ${cert.issuer} (Issued: ${cert.issued_date})${cert.skills.length > 0 ? `, Skills: ${cert.skills.join(', ')}` : ''}${cert.credential_link ? `, Credential: ${cert.credential_link}` : ''}`).join('\n')}

                User's question: "${userMessage}"

                Provide a direct and helpful answer based on the above information.`;

                const chatHistory = [{ role: "user", parts: [{ text: fullPrompt }] }];
                const payload = { contents: chatHistory };
                // Using the provided API key here
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const aiResponse = result.candidates[0].content.parts[0].text;
                    addMessage(aiResponse, 'ai');
                } else {
                    addMessage("I apologize, I couldn't process your request at this moment. Please try again.", 'ai');
                    console.error("Gemini API response structure unexpected:", result);
                }
            } catch (error) {
                console.error("Error communicating with Gemini API:", error);
                addMessage("I'm sorry, I'm having trouble connecting right now. Please try again later.", 'ai');
            } finally {
                chatLoadingSpinner.classList.add('hidden');
                sendChatBtn.disabled = false;
            }
        }

        sendChatBtn.addEventListener('click', sendChatMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });


        // --- Resume Matcher Functionality ---
        const resumeMatcherFloatBtn = document.getElementById('resume-matcher-float-btn');
        const resumeMatcherModal = document.getElementById('resume-matcher-modal');
        const jobDescriptionInput = document.getElementById('job-description-input');
        const analyzeJdBtn = document.getElementById('analyze-jd-btn');
        const matchResultsDiv = document.getElementById('match-results');
        const matchScoreSpan = document.getElementById('match-score');
        const matchedKeywordsSpan = document.getElementById('matched-keywords');
        const fitSummarySpan = document.getElementById('fit-summary');
        const jdLoadingSpinner = document.getElementById('jd-loading-spinner');

        resumeMatcherFloatBtn.addEventListener('click', () => openModal(resumeMatcherModal));

        // Show Resume Matcher button on scroll (e.g., when reaching a certain section)
        window.addEventListener('scroll', () => {
            const aboutSection = document.getElementById('about');
            const rect = aboutSection.getBoundingClientRect();
            if (rect.top <= window.innerHeight && rect.bottom >= 0) {
                resumeMatcherFloatBtn.classList.remove('hidden');
            } else {
                resumeMatcherFloatBtn.classList.add('hidden');
            }
        });


        async function analyzeJobDescription() {
            const jobDescription = jobDescriptionInput.value.trim();
            if (!jobDescription) {
                console.error("Please paste a job description to analyze.");
                return;
            }

            jdLoadingSpinner.classList.remove('hidden');
            analyzeJdBtn.disabled = true;
            matchResultsDiv.classList.add('hidden'); // Hide previous results

            try {
                const structuredPrompt = {
                    contents: [
                        {
                            role: "user",
                            parts: [
                                {
                                    text: `Analyze the following job description against Muhammad Sohail's resume.
                                    Provide a percentage match score, a list of top 5-10 matching keywords (comma-separated), and a concise summary (2-3 sentences) on why Muhammad's profile is a good fit.

                                    Muhammad Sohail's Resume (Summary):
                                    - Name: ${resumeData.name}
                                    - Email: ${resumeData.email}
                                    - Phone: ${resumeData.phone}
                                    - LinkedIn: https://linkedin.com/in/${resumeData.linkedin}
                                    - Location: ${resumeData.location}
                                    - Experience: ${resumeData.experience.map(exp => `${exp.title} at ${exp.company} (${exp.duration}), focused on ${exp.description}`).join('; ')}.
                                    - Education: ${resumeData.education.map(edu => `${edu.degree} from ${edu.institution} (${edu.duration})${edu.gpa ? `, GPA: ${edu.gpa}` : ''}${edu.coursework ? `, Coursework: ${edu.coursework}` : ''}`).join('; ')}.
                                    - Projects: ${resumeData.projects.map(proj => `${proj.name} (Tools: ${proj.tools.join(', ')}) - ${proj.summary}`).join('; ')}.
                                    - Skills (Programming): ${resumeData.skills["Programming"].join(', ')}.
                                    - Skills (ML Frameworks): ${resumeData.skills["ML Frameworks"].join(', ')}.
                                    - Skills (LLMs & RAG tools): ${resumeData.skills["LLMs & RAG tools"].join(', ')}.
                                    - Skills (Machine Learning & AI Concepts): ${resumeData.skills["Machine Learning & AI Concepts"].join(', ')}.
                                    - Skills (Deployment): ${resumeData.skills["Deployment"].join(', ')}.
                                    - Skills (Tools): ${resumeData.skills["Tools"].join(', ')}.
                                    - Languages (Spoken): ${Object.entries(resumeData.languages).map(([lang, proficiency]) => `${lang} (${proficiency})`).join(', ')}.
                                    - Certifications: ${resumeData.certifications.map(cert => `${cert.title} from ${cert.issuer} (Issued: ${cert.issued_date})${cert.skills.length > 0 ? `, Skills: ${cert.skills.join(', ')}` : ''}`).join('; ')}.


                                    Job Description:
                                    "${jobDescription}"

                                    Provide the output as a JSON object with keys: "matchScore" (integer), "matchedKeywords" (string, comma-separated), "fitSummary" (string).`
                                }
                            ]
                        }
                    ],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "matchScore": { "type": "NUMBER" },
                                "matchedKeywords": { "type": "STRING" },
                                "fitSummary": { "type": "STRING" }
                            },
                            required: ["matchScore", "matchedKeywords", "fitSummary"]
                        }
                    }
                };

                // Using the provided API key here
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(structuredPrompt)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const jsonString = result.candidates[0].content.parts[0].text;
                    const parsedJson = JSON.parse(jsonString);

                    matchScoreSpan.textContent = parsedJson.matchScore;
                    matchedKeywordsSpan.textContent = parsedJson.matchedKeywords;
                    fitSummarySpan.textContent = parsedJson.fitSummary;
                    matchResultsDiv.classList.remove('hidden');
                } else {
                    console.error("Could not analyze job description. Gemini API response structure unexpected:", result);
                    matchResultsDiv.classList.remove('hidden');
                    matchResultsDiv.innerHTML = '<p class="text-red-400">Error: Could not analyze the job description. Please try again.</p>';
                }
            } catch (error) {
                console.error("Error analyzing job description with Gemini API:", error);
                matchResultsDiv.classList.remove('hidden');
                matchResultsDiv.innerHTML = '<p class="text-red-400">An error occurred while analyzing the job description. Please try again later.</p>';
            } finally {
                jdLoadingSpinner.classList.add('hidden');
                analyzeJdBtn.disabled = false;
            }
        }

        analyzeJdBtn.addEventListener('click', analyzeJobDescription);


        // --- Cold Email Generation ---
        const coldEmailBotBtn = document.getElementById('cold-email-bot-btn');
        const coldEmailModal = document.getElementById('cold-email-modal');
        const coldEmailPromptInput = document.getElementById('cold-email-prompt-input');
        const generateEmailBtn = document.getElementById('generate-email-btn');
        const generatedEmailOutput = document.getElementById('generated-email-output');
        const emailTextOutput = document.getElementById('email-text-output');
        const copyEmailBtn = document.getElementById('copy-email-btn');
        const emailLoadingSpinner = document.getElementById('email-loading-spinner');

        coldEmailBotBtn.addEventListener('click', () => openModal(coldEmailModal));

        async function generateColdEmail() {
            const prompt = coldEmailPromptInput.value.trim();
            if (!prompt) {
                console.error("Please enter a prompt for the email generation.");
                return;
            }

            emailLoadingSpinner.classList.remove('hidden');
            generateEmailBtn.disabled = true;
            generatedEmailOutput.classList.add('hidden');

            try {
                const fullPrompt = `Generate a professional cold email based on the following request, as if you are someone writing an email to Muhammad Sohail or about hiring him.
                Muhammad Sohail's contact: sohail.cs951@gmail.com, (33) 781588798. LinkedIn: https://linkedin.com/in/${resumeData.linkedin}.
                He is a Data Science Intern, ML Developer, LLM Enthusiast.
                His current education is MSc M2 in Data Science and Network Intelligence at Institut Polytechnique de Paris, with coursework in ${resumeData.education[0].coursework}.
                His experience includes Data Science Intern at Université Paris-Saclay (HR chatbot with LLMs/RAG) and Data Analyst Intern at Code Clause.
                His key skills include: ${Object.values(resumeData.skills).flat().join(', ')}.
                His projects include: ${resumeData.projects.map(p => p.name).join(', ')}.
                Spoken Languages: ${Object.entries(resumeData.languages).map(([lang, proficiency]) => `${lang} (${proficiency})`).join(', ')}.
                Certifications: ${resumeData.certifications.map(cert => `${cert.title} from ${cert.issuer} (Issued: ${cert.issued_date})${cert.skills.length > 0 ? `, Skills: ${cert.skills.join(', ')}` : ''}`).join('; ')}.

                Prompt: "${prompt}"

                The email should be well-structured, polite, and persuasive, and suitable for a professional context. Do not include a subject line. Just the body of the email.`;

                const chatHistory = [{ role: "user", parts: [{ text: fullPrompt }] }];
                const payload = { contents: chatHistory };
                // Using the provided API key here
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const emailBody = result.candidates[0].content.parts[0].text;
                    emailTextOutput.value = emailBody;
                    generatedEmailOutput.classList.remove('hidden');
                } else {
                    console.error("Could not generate email. Gemini API response structure unexpected:", result);
                    generatedEmailOutput.classList.remove('hidden');
                    generatedEmailOutput.innerHTML = '<p class="text-red-400">Error: Could not generate the email. Please try again.</p>';
                }
            } catch (error) {
                console.error("Error generating cold email with Gemini API:", error);
                generatedEmailOutput.classList.remove('hidden');
                generatedEmailOutput.innerHTML = '<p class="text-red-400">An error occurred while generating the email. Please try again later.</p>';
            } finally {
                emailLoadingSpinner.classList.add('hidden');
                generateEmailBtn.disabled = false;
            }
        }

        generateEmailBtn.addEventListener('click', generateColdEmail);

        copyEmailBtn.addEventListener('click', () => {
            emailTextOutput.select();
            document.execCommand('copy'); // Fallback for clipboard API in iframes
            console.log('Email copied to clipboard!');
            const originalText = copyEmailBtn.textContent;
            copyEmailBtn.textContent = 'Copied!';
            setTimeout(() => { copyEmailBtn.textContent = originalText; }, 2000);
        });


        // --- Easter Egg ---
        const llmEnthusiastSpan = document.querySelector('#animated-subtitle span:last-child');
        const easterEggModal = document.getElementById('easter-egg-modal');

        llmEnthusiastSpan.addEventListener('click', () => {
            if (llmEnthusiastSpan.textContent.includes('LLM Enthusiast')) {
                openModal(easterEggModal);
            }
        });

        // --- Dynamic Tagline Generation ---
        const dynamicTaglineElement = document.getElementById('dynamic-tagline');
        async function generateDynamicTagline() {
            try {
                // Modified prompt to explicitly ask for one tagline without markdown
                const prompt = `Generate a very concise (under 15 words) and impactful tagline for a Data Science Intern, ML Developer, and LLM Enthusiast. The tagline should subtly hint at AI, Data Science, and Retrieval-Augmented Generation (RAG). Make it sound intelligent and modern. Do NOT use any markdown formatting like asterisks (**). Provide only the tagline text.`;

                const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    // Ensure any residual markdown is stripped, though the prompt should prevent it
                    let generatedText = result.candidates[0].content.parts[0].text;
                    generatedText = generatedText.replace(/\*\*/g, '').trim(); // Remove any double asterisks
                    dynamicTaglineElement.textContent = generatedText;
                } else {
                    dynamicTaglineElement.textContent = "Innovating with AI, one insight at a time.";
                    console.error("Gemini API response for tagline unexpected:", result);
                }
            } catch (error) {
                dynamicTaglineElement.textContent = "Transforming data into intelligent action.";
                console.error("Error generating dynamic tagline:", error);
            }
        }

        // --- Dynamic Certification Loading ---
        function loadCertifications() {
            const certificationsContainer = document.querySelector('#certifications .max-w-3xl.mx-auto'); // Target the div within certifications section
            certificationsContainer.innerHTML = ''; // Clear existing content

            resumeData.certifications.forEach(cert => {
                const certItem = document.createElement('div');
                certItem.classList.add('certifications-list-item'); // Apply new list item style

                let skillsHtml = '';
                if (cert.skills && cert.skills.length > 0) {
                    skillsHtml = `
                        <div class="cert-skills flex flex-wrap gap-2 mt-2">
                            ${cert.skills.map(skill => `<span class="skill-badge">${skill}</span>`).join('')}
                        </div>
                    `;
                }

                let credentialLinkHtml = '';
                if (cert.credential_link) {
                    credentialLinkHtml = `<a href="${cert.credential_link}" target="_blank" class="cert-link flex items-center mt-2">Show Credential <i class="fas fa-external-link-alt ml-1"></i></a>`;
                }

                certItem.innerHTML = `
                    <div class="cert-icon"><i class="fas fa-award"></i></div> <!-- Added a generic award icon -->
                    <div class="cert-details">
                        <p class="cert-title">${cert.title}</p>
                        <p class="cert-issuer-date">${cert.issuer} | Issued: ${cert.issued_date}</p>
                        ${skillsHtml}
                        ${credentialLinkHtml}
                    </div>
                `;
                certificationsContainer.appendChild(certItem);
            });
        }

        // Call loadCertifications when the page loads
        window.addEventListener('load', loadCertifications);

    </script>
</body>
</html>
